{"version":3,"sources":["table/plugin.js"],"names":["noop","constant","value","identity","x","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","t","not","f","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","s","v","elementEq","b","Optional","from","isType","type","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isObject","isArray","isBoolean","isUndefined","isNonNullable","isNullable","isFunction","isNumber","nativeSlice","slice","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","rawIndexOf","pred","i","len","range","num","r","foldr","acc","eachr","foldl","find","until","findUntil","findIndex","flatten","mapToObject","pure","get","head","last","findMap","arr","__assign","Object","assign","p","hasOwnProperty","this","__spreadArrays","il","k","j","jl","cached","called","args","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","version","current","oses","os","checkRange","str","substr","start","contains$1","startsWith","prefix","endsWith","suffix","trim","blank","isNotEmpty","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","opera","firefox","safari","nu$1","info","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","navigator","detect$3","fromDom","node","dom","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","ieContains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains$2","d1","d2","regularContains","is$1","keys","each$1","obj","props","map$1","tupleMap","tuple","filter$1","onTrue","onFalse","internalFilter","objAcc","mapToArray","size","get$1","key","has","hasNonNullableKey","validSectionList","detail","rowspan","colspan","rowdata","cells","section","elementnew","isNew","isLocked","rowcells","Function","nodeName","isType$1","isComment","isElement","isText","isDocument","isDocumentFragment","isTag","e","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","prevSibling","previousSibling","nextSibling","children","child","index","cs","supported","Element","attachShadow","getRootNode","isSupported","getShadowRoot","host","getShadowHost","isOpenShadowHost","shadowRoot","inBody","fbc","fab","doc","body","getBody","descendants","predicate","result","ancestors$1","ancestors","children$2","children$1","descendants$1","base","querySelectorAll","ClosestOrAncestor","ancestor","el","ancestor$1","child$2","child$1","descendant$1","querySelector","one","closest$1","rawSet","setAttribute","set","setAll","attrs","get$2","getAttribute","getOpt","remove","removeAttribute","clone","attributes","attr","isSupported$1","style","getPropertyValue","internalSet","property","setProperty","set$1","setAll$1","css","get$3","getComputedStyle","getUnsafeProperty","getRaw","raw","remove$1","removeProperty","internalRemove","getAttrValue","cell","fallback","parseInt","getSpan","hasColspan","hasRowspan","getCssValue","minWidth","minHeight","firstLayer","filterFirstLayer","tags","join","elm","lookup","columns","columnGroups","columnGroup","table","rows","fromRowsOrColGroups","elems","getSection","row","cells$1","column","getParentSection","parentName","isValidSection","fromTable","rows$1","addCells","gridRow","existingCells","before","after","newCells","setCells","addCell","mutateCell","mapCells","getCell","getCellElement","cellLength","extractGridDetails","grid","pass","fail","partition","cols","LOCKED_COL_ATTR","getLockedColumnsFromTable","lockedColStr","lockedCols","getLockedColumnsFromGrid","locked","idx","comparator","copy","sort","_val","filterItems","warehouse","generate","list","access","lockedColumns","rowData","maxRows","maxColumns","rowCount","columnsGroup","columnIndex","colIndex","columnext","generateColumns","currentRow_1","rowCell","extended","occupiedColumnPosition","occupiedRowPosition","columnPosition","newpos","Math","max","Warehouse","getAt","findItem","item","filtered","justCells","w","justColumns","hasColumns","getColumnAt","inSelection","bounds","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","startCol","finishRow","startRow","isWithin","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","detailA","detailB","min","getBox","isRect","detailIsWithin","isRectangular","intercepts","finish","inside","parentCell","innerCell","c1","c2","moveBy$1","deltaRow","deltaColumn","d","moveBy","getWarehouse","intercepts$1","first","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","marker","insertBefore","append","prepend","firstChild","appendChild","wrap","wrapper","after$1","elements","append$1","empty","textContent","rogue","remove$2","removeChild","unwrap","api","getOption","nodeValue","NodeValue","get$4","set$2","TagBoundaries","DomUniverse","up","closest","down","styles","copyTo","source","destination","as","insert","afterAll","appendAll","create","cloneNode","comparePosition","other","isSpecial","getText","setText","isBoundary","isEmptyTag","isNonEditable","decimalDigits","exponentPart","opt","unsignedDecimalLiteral","unsafeOne","universe","look","tail","commonElement","end","sharedOne","all$1","ancestors$3","ps1","ps2","prune","path","ind","pruned1","pruned2","shared","eq$2","firstpath","secondpath","sharedOne$1","_universe","lookupTable","container","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","ancestors$4","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getEdges","firstSelectedSelector","lastSelectedSelector","shiftSelection","box","getLast","identified","expandTo","retrieve$1","retrieveBox","edges","sectionSelector","firstAncestor","lastAncestor","fA","lA","getBox$1","Adt","cases","constructors","adt","acase","count","keys$1","argLength","branches","branchKeys","reqKey","foldArgs","log","label","params","type$1","multiple","single","cata","subject","onNone","onMultiple","onSingle","none$1","global","tinymce","util","Tools","resolve","clone$1","original","isDeep","shallow","deep","copy$1","shallowAs","cloneChildren","cat","someIf","Dimension","getOffset","parseFloat","aggregate","properties","val","isNaN","h","getOuter","cumulativeInclusions","api$1","offsetWidth","get$5","columns$1","isValidCell","rowsArr","col","decide","getBlock","isValid","getFallback","inBlock","c","deduce","rest","reverse","aa","delta","next","extras","abs","onDirection","isLtr","isRtl","getDirection","api$2","getBoundingClientRect","height","offsetHeight","get$6","getOuter$1","left","top","translate","SugarPosition","firstDefinedOrZero","absolute","win","defaultView","documentElement","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","boxPosition","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","array","lines","cellOption","lastLine","positions","optElements","ltr","rtl","step","detect$4","width","amount","units","unsupportedLength","fixed","relative","pattern","input","dot","RegExp","parse","accepted","exec","unitRaw","unit","check","isUnit","needManualCalc","getProp","px","toNumber","getHeight","getCalculatedHeight","getWidth","getCalculatedWidth","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","getPercentSize","getter","relativeParent","offsetParent","setPixelWidth","setPercentageWidth","setHeight","normalizePixelSize","setter","number","newSize","total","floor","convert","getTotalHeight","getHeightValue","getRawWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","getPercentageWidth","intWidth","percentMatch","choosePercentageSize","getPixelWidth","pixelMatch","normalizePixelWidth","choosePixelSize","getHeight$1","get$7","setGenericWidth","getPercentTableWidth","percentageBasedSizeRegex","pixelBasedSizeRegex","isCol","getRaw$1","getRawW","getRawH","hasRawStyle","prop","getDimension","cellOpt","backups","getWidthFrom","columnCells","justCols","pos","colFilter","isValidColumn","getDeduced","deduced","getPixelWidths","minCellWidth","getHeightFrom","direction","Cell","initial","noneSize","zero","getWidths","getCellDelta","singleColumnWidth","setElementWidth","adjustTableWidth","isRelative","percentageSize","initialWidth","floatWidth","getPercentageWidths","_delta","currentWidth","newWidth","pixelSize","TableSize","fallbackWidth","chooseSize","makeCell","seenSelected","rowIndex","td","extract","selectedSelector","isSelected","replica","replicaHouse","replicaStats","house","totalColumns","minRow","minCol","maxRow","maxCol","allCells","selectedCells","endRow","endCol","statsStruct","findSelectedStats","unselectedCells","stats","totalRows","fillInGaps","widthDelta","emptyRows","clean","colWidths","allColsWidth","getTableWidthDelta","getEnd","elementsWithCursorPosition","isCursorPosition","descend","child_1","res","last$1","descendantRtl","transferableAttributes","createCell","createCol","createColgroup","pasteReplace","newRow","cellOperations","mutate","formatsToClone","cloneCss","prev","sourceDom","targetDom","cssText","colgroup","docu","formats","lastNode","oldCell","newCell","firstText","formatSelector","clonedFormat","cloneFormats","validAttributes","attributeName","attribute","cloneAppropriateAttributes","gap","paste","fromDom$1","nodes","getNodeName","getBody$1","editor","getPixelWidth$1","getPixelHeight","addPxSuffix","removeDataStyle","removeStyleAttribute","getRawWidth$1","getStyle","getAttrib","isPercentage","getSelectionStart","selection","getStart","selections","unmergable","hasSpan","span","mergable","ephemera","strSelected","strFirstSelected","strLastSelected","selected","firstSelected","lastSelected","noMenu","forMenu","registerEvents","actions","cellSelection","on","preventDefault","extractSelected","content","format","innerText","getTextContent","serializer","serialize","serializeElements","getParent","domCell","getDoc","generators","targets","clipboard","paste$1","pasteCells","data","setRng","rng","focus","clear","only","middle","right","ColumnContext","determine","resize","context","neighbours","calcLeftEdgeDeltas","calcMiddleDeltas","calcRightEdgeDeltas","measures","recalculateHeightForCells","heights","recalculate","widths","groups","recalculateWidthForColumns","recalculateWidthForCells","recalculateAndApply","newSizes","adjustWidth","resizing","isLastColumn","clampedStep","clampTableDelta","deltas","newWidths","dx","resizeTable","adjustHeight","getPixelHeights","newHeights","dy","newCellSizes","newRowSizes","matchRowHeight","surround","sizes","startIndex","endIndex","results","clampDeltaHelper","minCellSize","diff","clampNegativeDelta","clampDelta","calcRelativeDeltas","ratio","newThis","clampedDelta","calcFixedDeltas","resizer","_prev","calcRedestributedWidths","totalWidth","pixelDelta","ratio_1","preserveTable","maxDelta","_index","_minCellSize","_totalWidth","_pixelDelta","_isRelative","ResizeWire","isResizable","view","origin","editable","adt$1","invalid","pixels","percent","validateFor","rawAmount","substring","Size","redistributeValues","newWidthType","newTotalWidth","scale","pc","redistributeToPx","_pc","redistributeToPercent","redistribute","newType","floats","redistributeEmpty","normalize","sum","values","add","scan","remainder","floored","roundDown","output","round","validate","getUnit","redistribute$1","optWidth","optHeight","widthUnit","oldWidths","getRawWidths","nuWidths","redistributeToColumns","redistributeToW","newHeight","hUnit","totalHeight","oldHeights","getRawHeights","redistributeToH","isPercentSizing$1","isPixelSizing$1","isNoneSizing$1","getPercentTableWidth$1","getGridSize","Event","fields","handlers","handler","unbind","trigger","event","typeDefs","registry","sort$1","baseWith","handleUnsupported","required","sorted","validateStrArr","req","reqMessage","invalidKeys","incorrect","invalidTypeMessage","handleExact","unsupported","unsuppMessage","exactly","DragMode","DragSink","DragApi","InDrag","previous","events","move","onEvent","mode","old","compare","update","reset","Movement","noDragState","inDragState","dragState","off","isOn","setup","mutation","settings","rate","timer","active","movement","drop","sink","throttledDrop","cancel","clearTimeout","throttle","setTimeout","runIfActive","forceDrop","delayDrop","go","destroy","fromRawEvent","rawEvent","fa","fb","composed","composedPath","getOriginalEventTarget","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle","addEventListener","removeEventListener","filter$2","bind$2","bind$1","fromRawEvent$1","read","split","supports","classList","add$2","clazz","add$1","add$3","has$1","namespace","dashNamespace","MouseDrag","dragApi","blocker","options","layerClass","position","Blocker","mdown","mup","mmove","mout","isContentEditableTrue","styles$1","resolve$1","BarMutation","drag","delegate","Mutation","xDelta","yDelta","resizeBar","resizeRowBar","resizeColBar","wire","drawBar","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","data-column","role","refreshRow","rowPositions","tableWidth","rowBar","data-row","refreshGrid","warhouse","resizableRowBars","resizableRows","resizableRowPositions","_pos","barIndex","resizableColBars","resizableCols","resizableColumns","resizableColPositions","refresh","each$2","bars","hide","show","resizeBarDragging","BarManager","transform","hoverTable","getResizer","_dataRow","currentRow","_dataCol","currentCol","getDelta","dir","startAdjust","mousedown","isColBar","findClosestEditableTable","findClosestContentEditable","mouseover","tbl","hideBars","showBars","TableResize","lazySizing","hdirection","vdirection","manager","beforeResize","afterResize","startDrag","_event","fireNewRow","fire","fireNewCell","fireTableModified","styleModified","structure","structureModified","defaultStyles","border-collapse","defaultAttributes","border","defaultColumnResizingBehaviour","getTableSizingMode","getParam","getTableResponseWidth","getDefaultAttributes","getDefaultStyles","isPixelsForced","editorWidth","isResponsiveForced","_value","determineDefaultStyles","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","shouldStyleWithCss","isPercentagesForced","useColumnGroup","getTableHeaderType","defaultValue","getColumnResizingBehaviour","givenMode","isPreserveTableColumnResizing","isResizeTableColumnResizing","getCloneElements","cloneElements","get$9","cleanupLegacyAttributes","convertToPixelSize","getPixelTableWidth","enforcePercentage","convertToPercentSize","enforcePixels","tableSizing","enforceNone","rowElements","createContainer","padding","margin","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","lazyResizingBehaviour","afterCornerResize","isRightEdgeResize","getNumColumns","percentW","isPixel","computedWidth","syncPixels","rawWire","inline","get$a","objectResizing","hasObjectResizing","hasTableResizeBars","sz","getRng","rawTable","fireObjectResizeStart","fireObjectResized","undoManager","targetElm","select","addClass","origin_1","isReadOnly","lazyWire","remove$6","point","offset","toEnd","freefallRtl","freefallRtl$1","universe$1","halve","main","getGenericWidth","setIfNot","ignore","render","newRows","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sectionName","newSection","generateSection","sectionElems","renderOrRemoveSection","removeSection","headSection","bodySection","footSection","columnGroupsSection","findDiff","comp","subgrid","restOfRow","getRow","endColIndex","restOfColumn","getColumn","toDetails","seen","details","rowdetails","updateSeen","toGrid","groupElementNew","rowCells","deriveRows","rendered","findRow","rowdatanew","toDetailList","findInWarehouse","extractCells","cell$1","lc","run","operation","adjustment","postAction","genWrappers","sizing","resizeBehaviour","model","fromWarehouse","cursor","out","newElements","onCell","onPasteByEditor","onCells","onUnlockedCell","onUnlockedCells","allUnlocked","isUnlockedTableCell","onUnlockedMergable","_warehouse","onMergable","mergeable","onUnlockedUnmergable","onUnmergable","unmerge","substitution","currentCell","isToReplace","splitRows","uniqueCells","replacement","_loop_1","sub","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","message","onError","Result","fromOption","err","measureWidth","gridA","gridB","rowDelta","colDelta","measureHeight","generateElements","generator","rowFill","colFill","newChildren","tailor","fillCols","fillRows","gridWidth","isLastColLocked","modifiedCols","newLockedColumns","isSpanning","matching","getLockedColumnsWithinBounds","startAddress","colNum","merge$1","validStartAddress","currentStartAddress","gridColLength","possibleColAddresses","validColAddress","getValidStartAddress","lockedColumnsWithinBounds","rowRemainder","colRemainder","colRequired","rowRequired","measure","fittedGrid","newLockedColumnsWithinBounds","lockedColumnObj","skippedCol","gridBColIndex","newCellElm","mergeTables","insertCols","prevCell","splitCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","_a","oldCols","oldRows","newLocked","secondDiff","fittedGridB","newChild","lockedColFill","insertRowAt","example","between","ex","insertColumnAt","withinSpan","getElementFor","replaceIn","isTarget","notStartRow","notStartColumn","replaceColumn","replaceRow","targetRow","uniqueColumns","currentDetail","elementToData","getScopeAttribute","Generators","toData","nuFrom","recent","getOrInit","makeNew","replaceOrInit","merge","stringAttributes","baseScope_1","scopes_1","getScopeProperty","blockList","universe$2","isBlock$1","tagName","isBlock","isList$1","isList","isEmptyTag$1","merge$2","isBr","markCell","rightSiblingIsBlock","rightSibling","isListItem","contents","advancedBr","outcome","elementFromGrid","findIn","bundle","uniqueRows","gridifyRows","pasteDetails","wh","getCellsType","headerPred","headerCells","_table","_info","adjustAndRedistributeWidths$1","tablePixelWidth","firstColumnIsLocked","lastColumnIsLocked","getColumnsWidth","uniqueCols","insertColumnsExtractor","pasteColumnsExtractor","insertRowsBefore","targetIndex","newGrid","insertRowsAfter","newG","insertColumnsBefore","extractDetail","insertColumnsAfter","eraseColumns","_comparator","_genWrappers","deleteColumnsAt","eraseRows","deleteRowsAt","makeColumnsHeader","initialGrid","currentGrid","unmakeColumnsHeader","mergeCells","unmergeCells","gridify","address","pasteColsBefore","mergedGrid","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnType","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","detectHeaderRow","isThead","areAllCellsThs","thead","ths","getRowType","_rowConfig","switchRowSection","rowElm","newSectionName","tableElm","oldSectionElm","oldSectionName","sectionElm_1","firstTableChild_1","insertAfter","switchCellType","newCellType","rename","renameCell","setAttrib","switchCellsType","switchSectionType","allTableRows","headerRowTypeSetting","headerRowType","detectedType","getSelectionStartFromSelector","startCellName","getSelectionStartCellFallback","getSelectionStartCell","getSelectionStartCellOrCaption","getCellsFromSelection","_cell","getRowsFromSelection","oa","ob","rowsOpt","TableActions","isTableBody","colMutationOp","execute","guard","effect","des","createRng","setStart","setEnd","deleteRow","deleteColumn","insertRowsBefore$1","insertRowsAfter$1","insertColumnsBefore$1","insertColumnsAfter$1","mergeCells$1","unmergeCells$1","pasteColsBefore$1","pasteColsAfter$1","pasteRowsBefore$1","pasteRowsAfter$1","pasteCells$1","extractType","validTypes","setTableCellType","setTableRowType","getTableRowType","rowTypes","hasHeader","hasFooter","hasBody","getTableCellType","getTableColType","DefaultRenderOptions","colGroups","createGroupRow","createRows","rowHeaders","columnHeaders","createRow","placeCaretInCell","collapse","insert$1","colHeaders","headerType","renderOpts","rowHeadersGoInThead","actualRowHeaders","theadRows","tbody","tbodyRows","render$1","get$b","getOuter$2","insertContent","addVisual","isPercentage$1","fireEvents","selectFirstCellInTable","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","constrainSpan","currentColspan","copyCols","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateColGroup","cellsToCopy","copiedCells","clonedCell","fakeTR","generateRows","copyRows","slicedGrid","filteredGrid","slicedDetails","copy$2","global$1","getTDTHOverallStyle","firstChildStyle","elms","currentStyle","checkChildren","applyAlign","formatter","unApplyAlign","buildListItems","inputList","startItems","title","isListGroup","items","menu","appendItems","rgbToHex","toHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemValue","itemKey","comparisonValue","getAdvancedTab","dialogName","advTabItems","getAlignment","formatName","matchNode","getHAlignment","getVAlignment","children$3","getItems","classes","getCellClassList","getClassList","modifiers","testTruthy","setStyle","setFormat","DomModifier","normal","ifTruthy","getSelectedCells","cellA","cellB","applyCellData","oldData","isSingleCell","modifiedData","tableOpt","cellElm","celltype","modifier","colModifier","class","updateSimpleProps","updateAdvancedProps","unApplyVAlign","halign","valign","applyVAlign","styleModified_1","onSubmitCellForm","getData","close","transact","cellsData","colElm","extractDataFromCellElement","open","dialogTabPanel","tabs","dialogPanel","windowManager","buttons","primary","initialData","onSubmit","formChildren","getItems$1","getRowClassList","getClassList$1","applyRowData","isSingleRow","updateSimpleProps$1","updateAdvancedProps$1","align","typeModified_1","onSubmitRowForm","open$1","rowsData","extractDataFromRowElement","global$2","getItems$2","insertNewTable","rowColCountItems","inputMode","appearanceItems","hasAppearanceOptions","classListItem","styleTDTH","onSubmitTableForm","captionElm","removePxSuffix","cellspacing","cellpadding","border-width","border-color","serializeStyle","setAttribs","applyDataToElement","caption","captionModified","open$2","hasAdvTableTab","spacing","borderWidth","advStyle","extractDataFromSettings","optBorderWidth","getBorder","extractDataFromTableElement","getTableClassList","generalPanel","dialogBody","getSelectionStartCellOrCaption$1","getSelectionStartCell$1","registerCommands","getTableFromCell","postExecute","actOnSelection","copyRowSelection","copyColSelection","pasteOnSelection","getRows","clonedRows","pasteRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutCol","_grid","setColumns","mceTableCutRow","setRows","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","getColumns","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","cellOrCaption","isEmpty","setContent","setCursorLocation","nodeChanged","mceTableSizingMode","ui","setSizingMode","func","addCommand","fireTableModifiedForSelection","mceTableCellType","_ui","mceTableRowType","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","registerQueryCommands","mceTableColType","addQueryValueHandler","cellFormats","tablecellbackgroundcolor","backgroundColor","remove_similar","tablecellbordercolor","borderColor","tablecellborderstyle","borderStyle","tablecellborderwidth","adt$2","CellLocation","detect$5","SimRange","soffset","foffset","adt$3","Situ","onBefore","onOn","onAfter","situ","adt$4","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","selectNodeContentsUsing","selectNodeContents","relativeToNative","finishSitu","createRange","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setFinish","exactToNative","toRect","rect","bottom","adt$5","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","collapsed","rev","doDiagnose","getRanges","asLtrRange","inRect","locateOffset","textnode","rangeForOffset","rectForOffset","maxX","curDeltaX","searchForPoint","locateNode","selectNode","rects","getClientRects","locate","searchInChildren","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","offsetNode","caretRangeFromPoint","searchTextNodes","boundedX","boundedY","locate$1","searchFromPoint","availableSearch","beforeSpecial","name$1","preprocessRelative","preprocessExact","after$3","makeRange","same","getNativeSelection","getSelection","doSetNativeRange","removeAllRanges","addRange","doSetRange","setRangeFromRelative","setBaseAndExtent","extend","setLegacyRtlRange","setExact","setRelative","toNative","getDomRange","preprocess","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchor","focus_1","anchorOffset","focusOffset","setToElement","get$c","sel","getExact","getFirstRect$1","getFirstRect","getAtPoint","fromPoint$1","global$3","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","Response","Situs","convertToRange","makeSitus","detect$6","selectRange","cellSel","traverse","backtrack","_direction","transition","sidestep","advance","sibling","successors","go$1","rules","succ","rule","Walkers","hone","isLeaf","seekLeft","seekRight","universe$3","before$4","before$3","after$5","after$4","adt$6","success","failedUp","failedDown","isRow","BeforeAfter","verify","bridge","beforeOffset","afterOffset","failure","afterCell","beforeCell","beforeBounds","getRect","afterBounds","isOverlapping","_sharedRow","onSuccess","onFailedUp","onFailedDown","gatherer","cand","gather","handleParent","findBr","br","adjacent","inParent","indexInParent","tryBr","handleBr","tgt","moveDown","caret","moveUp","toCaret","getElemBox","getBoxAt","getRangedRect","getPartialBox","getEntireBox","adt$7","retry","inOutsideBlock","isOutside","downMovement","adjuster","guessBox","lowerCaret","adjustTil","numRetries","isAtTable","adjustForTable","situsFromPoint","guess","newCaret","moved","adjusted","getInnerHeight","checkScroll","scrollBy","Retries","tryUp","higherCaret","tryDown","ieTryUp","ieTryDown","getJumpSize","findSpot","brNeighbour","fromSitus","analysis","_message","process","scan$1","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","inSameTable","simulate","spot","handle$2","navigate","precheck","firstUpCheck","seekLeft$1","lastOffset","lastDownCheck","seekRight$1","findCell","MouseSelection","annotations","isSet","clearstate","applySelection","clearBeforeUpdate","selectContents","mouseup","isKey","keycode","isUp","isDown","isNavigation","ltr$2","isBackward","isForward","rtl$2","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","innerHeight","getScrollY","_DOC","by","rc","keyboard","clearToNavigate","keydown","realEvent","which","shiftKey","update$1","attempts","newSels","keyup","sync","SelectionAnnotation","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","getOtherCells","upOrLeftCells","upGrid","upDetails","slicedCells","getUpOrLeftCells","downOrRightCells","downGrid","downDetails","getDownOrRightCells","hasInternalTarget","CellSelection","selectionTargets","otherCells","fireTableSelectionChange","fireTableSelectionClear","_e","mouseHandlers","mouse","keyHandlers","external$1","external","lastTarget","lastTimeStamp","handleResponse","response","hasShiftKey","ns","isLeftMouse","button","doubleTap","touchEnd","lT","lTS","timeStamp","wrappedEvent","Plugin","lazyRoot","Selections","changeHandlers","selectionDetails","isCaption","isDisabledForSelection","findTargets","getExtractedDetails","onAny","onFirst","onLast","unmergeable","resetTargets","onSetup","isDisabled","setDisabled","isDisabledFromLocked","lockedDisable","onSetupTable","onSetupCellOrRow","onSetupColumn","onSetupPasteable","getClipboardData","onSetupPasteableColumn","onSetupMergeable","_targets","onSetupUnmergeable","getSelectionTargets","resizeHandler","clearClipboard","clearRows","clearColumns","Clipboard","cmd","command","execCommand","insertTableAction","numRows","numColumns","tableProperties","onAction","deleteTable","icon","addMenuItem","hasTableGrid","addNestedMenuItem","getSubmenuItems","fancytype","addContextMenu","addMenuItems","addMenuButton","tooltip","fetch","callback","addButton","addButtons","toolbar","getToolbar","addContextToolbar","addToolbars","addTempAttr","register","registerFormats","hasTabNavigation","keyCode","TAB","body_1","isRoot_1","handle$1","setClipboardRows","getClipboardRows","setClipboardCols","getClipboardCols","getApi"],"mappings":"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CEqP,KAAM,SACNrP,MAAO,UAET,CACEqP,KAAM,OACNrP,MAAO,QAET,CACEqP,KAAM,SACNrP,MAAO,YAIb,CACEoE,KAAM,cACNL,KAAM,aACNilB,MAAO,gBAET,CACE5kB,KAAM,kBACNL,KAAM,aACNilB,MAAO,qBASX,MAAO,CACLimC,MAAO,WACP7qD,KAAM,WACN+qD,MAJyB,SAAfiB,EAAwB,CALlB,CAChBhsD,KAAM,cACNL,KAAM,QACNilB,MAAO,iBAEyCroB,OAAO0vD,GAAeA,IAOtEC,GAAe,SAAU12B,EAAS22B,EAAYz1B,EAAQphB,GACxD,OAAOtT,EAAKwzB,GAAS,SAAUx1B,GAC7B,OAAO02B,EAAO8zB,UAAU4B,UAAU92C,EAAK62C,EAAansD,MACnDrC,MAAM,KAEP0uD,GAAgBtwD,EAAMmwD,GAAc,CACtC,OACA,SACA,SACC,SACCI,GAAgBvwD,EAAMmwD,GAAc,CACtC,MACA,SACA,UACC,UA2GCK,GAAa,CACf,CACEvsD,KAAM,QACNL,KAAM,QACNilB,MAAO,SAET,CACE5kB,KAAM,SACNL,KAAM,QACNilB,MAAO,UAET,CACE5kB,KAAM,WACNL,KAAM,UACNilB,MAAO,YACPmmC,MAAO,CACL,CACE9/C,KAAM,OACNrP,MAAO,MAET,CACEqP,KAAM,cACNrP,MAAO,QAIb,CACEoE,KAAM,QACNL,KAAM,UACNilB,MAAO,QACPmmC,MAAO,CACL,CACE9/C,KAAM,OACNrP,MAAO,IAET,CACEqP,KAAM,MACNrP,MAAO,OAET,CACEqP,KAAM,SACNrP,MAAO,OAET,CACEqP,KAAM,YACNrP,MAAO,YAET,CACEqP,KAAM,eACNrP,MAAO,cAIb,CACEoE,KAAM,SACNL,KAAM,UACNilB,MAAO,UACPmmC,MAAO,CACL,CACE9/C,KAAM,OACNrP,MAAO,IAET,CACEqP,KAAM,OACNrP,MAAO,QAET,CACEqP,KAAM,SACNrP,MAAO,UAET,CACEqP,KAAM,QACNrP,MAAO,WAIb,CACEoE,KAAM,SACNL,KAAM,UACNilB,MAAO,UACPmmC,MAAO,CACL,CACE9/C,KAAM,OACNrP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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.7.0 (2021-02-10)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var size = function (obj) {\n      return keys(obj).length;\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column, isLocked) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column,\n        isLocked: isLocked\n      };\n    };\n    var rowdata = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var elementnew = function (element, isNew, isLocked) {\n      return {\n        element: element,\n        isNew: isNew,\n        isLocked: isLocked\n      };\n    };\n    var rowdatanew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var rowcells = function (cells, section) {\n      return {\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetails = function (details, section) {\n      return {\n        details: details,\n        section: section\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$2(element, key));\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported$1(sourceDom) && isSupported$1(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cell) {\n      return getSpan(cell, 'colspan') > 1;\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$3(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        if (is(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns = function (ancestor) {\n      if (is(ancestor, 'colgroup')) {\n        return children$2(ancestor, 'col');\n      } else {\n        return bind(columnGroups(ancestor), function (columnGroup) {\n          return children$2(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$2(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells$1 = map(columns(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdata(row, cells$1, 'colgroup');\n        } else {\n          var cells$1 = map(cells(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdata(row, cells$1, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable = function (table) {\n      var rows$1 = rows(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArrays(columnGroups$1, rows$1);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var addCells = function (gridRow, index, cells) {\n      var existingCells = gridRow.cells;\n      var before = existingCells.slice(0, index);\n      var after = existingCells.slice(index);\n      var newCells = before.concat(cells).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var addCell = function (gridRow, index, cell) {\n      return addCells(gridRow, index, [cell]);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n\n    var LOCKED_COL_ATTR = 'data-snooker-locked-cols';\n    var getLockedColumnsFromTable = function (table) {\n      return getOpt(table, LOCKED_COL_ATTR).bind(function (lockedColStr) {\n        return Optional.from(lockedColStr.match(/\\d+/g));\n      }).map(function (lockedCols) {\n        return mapToObject(lockedCols, always);\n      });\n    };\n    var getLockedColumnsFromGrid = function (grid) {\n      var locked = foldl(extractGridDetails(grid).rows, function (acc, row) {\n        each(row.cells, function (cell, idx) {\n          if (cell.isLocked) {\n            acc[idx] = true;\n          }\n        });\n        return acc;\n      }, {});\n      var lockedArr = mapToArray(locked, function (_val, key) {\n        return parseInt(key, 10);\n      });\n      return sort(lockedArr);\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access[key(row, column)];\n      return raw !== undefined ? Optional.some(raw) : Optional.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var columns = {};\n      var tableOpt = head(list).map(function (rowData) {\n        return rowData.element;\n      }).bind(table);\n      var lockedColumns = tableOpt.bind(getLockedColumnsFromTable).getOr({});\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      each(list, function (rowData) {\n        if (rowData.section === 'colgroup') {\n          columns = generateColumns(rowData);\n        } else {\n          var currentRow_1 = [];\n          each(rowData.cells, function (rowCell) {\n            var start = 0;\n            while (access[key(rowCount, start)] !== undefined) {\n              start++;\n            }\n            var isLocked = hasNonNullableKey(lockedColumns, start.toString());\n            var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);\n            for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n              for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n                var rowPosition = rowCount + occupiedRowPosition;\n                var columnPosition = start + occupiedColumnPosition;\n                var newpos = key(rowPosition, columnPosition);\n                access[newpos] = current;\n                maxColumns = Math.max(maxColumns, columnPosition + 1);\n              }\n            }\n            currentRow_1.push(current);\n          });\n          maxRows++;\n          cells.push(rowdata(rowData.element, currentRow_1, rowData.section));\n          rowCount++;\n        }\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns\n      };\n    };\n    var fromTable$1 = function (table) {\n      var list = fromTable(table);\n      return generate(list);\n    };\n    var justCells = function (warehouse) {\n      return bind(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable$1,\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      return api.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$2(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      var isSpecial = function (element) {\n        var tag = name(element);\n        return contains([\n          'script',\n          'noscript',\n          'iframe',\n          'noframes',\n          'noembed',\n          'title',\n          'style',\n          'textarea',\n          'xmp'\n        ], tag);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$3,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get$2,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone$1,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          isSpecial: isSpecial,\n          getText: get$4,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$2 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$2(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne = oneAll;\n    var ancestors$3 = ancestors$2;\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return ancestors$3(universe, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts$1(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors$4(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne$1(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy$1(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox$1(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type$1.none;\n    var multiple = type$1.multiple;\n    var single = type$1.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve$1(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().map(single).getOrThunk(none$1);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$3(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$3(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$5 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var columns$1 = function (warehouse, isValidCell) {\n      if (isValidCell === void 0) {\n        isValidCell = always;\n      }\n      var grid = warehouse.grid;\n      var cols = range(grid.columns, identity);\n      var rowsArr = range(grid.rows, identity);\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isValid = function (detail) {\n          return detail.colspan === 1 && isValidCell(detail.element);\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isValid, getFallback);\n      });\n    };\n    var decide = function (getBlock, isValid, getFallback) {\n      var inBlock = getBlock();\n      var validInBlock = find(inBlock, isValid);\n      var detailOption = validInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range(grid.rows, identity);\n      var cols = range(grid.columns, identity);\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$3(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api$2 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$4 = onDirection(ltr, rtl);\n    var width = {\n      delta: function (amount, table) {\n        return detect$4(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$4(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$4(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$3(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var height = cell.dom.getBoundingClientRect().height;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return height;\n      } else {\n        var paddingTop = getProp(cell, 'padding-top', 0);\n        var paddingBottom = getProp(cell, 'padding-bottom', 0);\n        var borderTop = getProp(cell, 'border-top-width', 0);\n        var borderBottom = getProp(cell, 'border-bottom-width', 0);\n        var borders = borderTop + borderBottom;\n        return height - paddingTop - paddingBottom - borders;\n      }\n    };\n    var getCalculatedWidth = function (cell) {\n      var width = cell.dom.getBoundingClientRect().width;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return width;\n      } else {\n        var paddingLeft = getProp(cell, 'padding-left', 0);\n        var paddingRight = getProp(cell, 'padding-right', 0);\n        var borderLeft = getProp(cell, 'border-left-width', 0);\n        var borderRight = getProp(cell, 'border-right-width', 0);\n        var borders = borderLeft + borderRight;\n        return width - paddingLeft - paddingRight - borders;\n      }\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$6(cell));\n    };\n    var getWidth = function (cell) {\n      return needManualCalc() ? getCalculatedWidth(cell) : getProp(cell, 'width', get$5(cell));\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var getPercentSize = function (elm, getter) {\n      var relativeParent = offsetParent(elm).getOr(getBody(owner(elm)));\n      return getter(elm) / getter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$6(cell);\n      }\n      return normalizePixelSize(value, cell, get$6, setHeight);\n    };\n    var get$7 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Optional.from(get$2(element, 'width'));\n      }, function (width) {\n        return Optional.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = getWidth(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$5(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = rPixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return getWidth(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return getWidth(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$7(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$5(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$5) + '%';\n    };\n    var isPercentSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing = function (table) {\n      return getRawWidth(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n    var pixelBasedSizeRegex = constant(rPixelBasedSizeRegex);\n\n    var isCol = isTag('col');\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      var fallback = function (e) {\n        return isCol(e) ? get$5(e) : getPixelWidth(e, tableSize);\n      };\n      return getRaw$1(cell, 'width', fallback);\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', getHeight$1);\n    };\n    var justCols = function (warehouse) {\n      return map(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var hasRawStyle = function (cell, prop) {\n      return getRaw(cell, prop).isSome();\n    };\n    var isValidColumn = function (cell) {\n      return !isCol(cell) || hasRawStyle(cell, 'width');\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback, tableSize) {\n      var columnCells = columns$1(warehouse, function (cell) {\n        return hasRawStyle(cell, 'width');\n      });\n      var columns = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map(columns, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column, tableSize);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$5(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows = rows$1(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map(direction.positions(rows, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map(rows, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight$1, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var noneSize = function (table) {\n      var getWidth = function () {\n        return get$5(table);\n      };\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (initialWidth, table) {\n      var floatWidth = Cell(parseFloat(initialWidth));\n      var pixelWidth = Cell(get$5(table));\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth.get() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / pixelWidth.get() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = floatWidth.get();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n        floatWidth.set(newWidth);\n        pixelWidth.set(get$5(table));\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: floatWidth.get,\n        pixelWidth: pixelWidth.get,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (initialWidth, table) {\n      var width = Cell(initialWidth);\n      var getWidth = width.get;\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n        width.set(newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth, element);\n      }\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth, element);\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol, allCells, selectedCells) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol,\n        allCells: allCells,\n        selectedCells: selectedCells\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      var allCells = [];\n      var selectedCells = [];\n      each$1(house.access, function (detail) {\n        allCells.push(detail);\n        if (isSelected(detail)) {\n          selectedCells.push(detail);\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (replica, stats, house, widthDelta) {\n      each$1(house.columns, function (col) {\n        if (col.column < stats.minCol || col.column > stats.maxCol) {\n          remove$2(col.element);\n        }\n      });\n      var emptyRows = filter(firstLayer(replica, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each(firstLayer(replica, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(replica, LOCKED_COL_ATTR);\n      remove(replica, 'data-snooker-col-series');\n      var tableSize = TableSize.getTableSize(replica);\n      tableSize.adjustTableWidth(widthDelta);\n    };\n    var getTableWidthDelta = function (table, warehouse, tableSize, stats) {\n      if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {\n        return 0;\n      }\n      var colWidths = getPixelWidths(warehouse, table, tableSize);\n      var allColsWidth = foldl(colWidths, function (acc, width) {\n        return acc + width;\n      }, 0);\n      var selectedColsWidth = foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), function (acc, width) {\n        return acc + width;\n      }, 0);\n      var newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();\n      var delta = newWidth - tableSize.pixelWidth();\n      return tableSize.getCellDelta(delta);\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element, selectedSelector);\n      };\n      var replica = deep(table);\n      var list = fromTable(replica);\n      var tableSize = TableSize.getTableSize(table);\n      var replicaHouse = Warehouse.generate(list);\n      var replicaStats = findSelectedStats(replicaHouse, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(replica, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, replicaHouse, replicaStats, isSelected);\n      var house = Warehouse.fromTable(table);\n      var widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);\n      clean(replica, replicaStats, replicaHouse, widthDelta);\n      return replica;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function () {\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      return td;\n    };\n    var createCol = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createColgroup = function () {\n      return SugarElement.fromTag('colgroup');\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy(prev.element, clone);\n        remove$1(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$1(clone, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var docu = owner(prev.element);\n        var td = SugarElement.fromTag(name(prev.element), docu.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var doc = owner(prev.element);\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        col: createCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map(nodes, SugarElement.fromDom);\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody$1 = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove(element, 'data-mce-style');\n      };\n      each(cells(table), removeStyleAttribute);\n      each(columns(table), removeStyleAttribute);\n    };\n    var getRawWidth$1 = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n\n    var selection = function (selections) {\n      return cata(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste$1 = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var replica = extract(table, attributeSelector);\n        removeDataStyle(replica);\n        return [replica];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Optional.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = SugarElement.fromDom(domCell);\n            table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = function (elm) {\n                return name(elm) === 'table';\n              };\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste(doc);\n                var targets = paste$1(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (data) {\n                  editor.selection.setRng(data.rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustAndRedistributeWidths = function (_table, list, details, tableSize, resizeBehaviour) {\n      var warehouse = Warehouse.generate(list);\n      var sizes = tableSize.getWidths(warehouse, tableSize);\n      var tablePixelWidth = tableSize.pixelWidth();\n      var _a = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative), newSizes = _a.newSizes, delta = _a.delta;\n      recalculateAndApply(warehouse, newSizes, tableSize);\n      tableSize.adjustTableWidth(delta);\n    };\n    var adjustWidthTo = function (_table, list, _info, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, isRelative) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, totalWidth, pixelDelta, isRelative) {\n        if (isRelative) {\n          var tableWidth = totalWidth + pixelDelta;\n          var ratio_1 = tableWidth / totalWidth;\n          var newSizes = map(sizes, function (size) {\n            return size / ratio_1;\n          });\n          return {\n            delta: ratio_1 * 100 - 100,\n            newSizes: newSizes\n          };\n        } else {\n          return {\n            delta: pixelDelta,\n            newSizes: sizes\n          };\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, isRelative) {\n        if (isRelative) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, _totalWidth, _pixelDelta, _isRelative) {\n        return {\n          delta: 0,\n          newSizes: sizes\n        };\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body$1 = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var adt$1 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$1.invalid(value);\n    };\n    var from$1 = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$1.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$1.pixels, value);\n      }\n      return adt$1.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$1), { from: from$1 });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute$1 = function (table, optWidth, optHeight, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$5(table);\n        var oldWidths = getRawWidths(warehouse, table, tableSize);\n        var nuWidths = redistribute(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$6(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing$1 = isPercentSizing;\n    var isPixelSizing$1 = isPixelSizing;\n    var isNoneSizing$1 = isNoneSizing;\n    var getPercentTableWidth$1 = getPercentTableWidth;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort$1(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var InDrag = function () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    };\n\n    var NoDrag = function () {\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: noop,\n        reset: noop,\n        events: events.registry\n      };\n    };\n\n    var Movement = function () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$2 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var read = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$8 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-dragster');\n    var resolve = styles.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$3(div, resolve('blocker'));\n      add$3(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract$1 = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get$2(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var styles$1 = css('ephox-snooker');\n    var resolve$1 = styles$1.resolve;\n\n    var Mutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve$1('resizer-bar');\n    var resizeRowBar = resolve$1('resizer-rows');\n    var resizeColBar = resolve$1('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$3(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add$3(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add$3(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows = rows$1(warehouse);\n        var cols = columns$1(warehouse);\n        refreshGrid(warehouse, wire, table, rows, cols);\n      }\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve$1('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$2(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add$3(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$1 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$1 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n    var styleModified = {\n      structure: false,\n      style: true\n    };\n    var structureModified = {\n      structure: true,\n      style: false\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var determineDefaultStyles = function (editor) {\n      if (isPixelsForced(editor)) {\n        var editorWidth = editor.getBody().offsetWidth;\n        return __assign(__assign({}, defaultStyles), { width: editorWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var isResizeTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'resizetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n\n    var get$9 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        var width = getRawWidth$1(editor, table.dom).filter(isPercentage).getOrThunk(function () {\n          return getPercentTableWidth$1(table);\n        });\n        return TableSize.percentageSize(width, table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(get$5(table), table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove(element, 'width');\n    };\n    var convertToPercentSize = function (table, tableSize) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table, tableSize) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$1(table, 'width');\n      var columns$1 = columns(table);\n      var rowElements = columns$1.length > 0 ? columns$1 : cells(table);\n      each(rowElements, function (cell) {\n        remove$1(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPercentSize(table, tableSizing);\n    };\n    var enforcePixels = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPixelSize(table, tableSizing);\n    };\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each(cells(table), function (cell) {\n          var computedWidth = get$3(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$a = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$2(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$9(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(editor, table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$6(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$a(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing$1(table) && isPixelsForced(editor)) {\n            enforcePixels(editor, table);\n          } else if (!isPercentSizing$1(table) && isPercentagesForced(editor)) {\n            enforcePercentage(editor, table);\n          }\n          if (isNoneSizing$1(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(editor, table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth$1(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, styleModified);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl = function (universe, element) {\n      var candidate = scan(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl;\n\n    var universe$1 = DomUniverse();\n    var freefallRtl$2 = function (element) {\n      return freefallRtl$1(universe$1, element);\n    };\n\n    var halve = function (main, other) {\n      var colspan = getSpan(main, 'colspan');\n      if (colspan === 1) {\n        var width = getGenericWidth(main);\n        width.each(function (w) {\n          var newWidth = w.value / 2;\n          setGenericWidth(main, newWidth, w.unit);\n          setGenericWidth(other, newWidth, w.unit);\n        });\n      }\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var insert = function (table, selector, element) {\n      last(children$2(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$2(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert(table, 'caption', newSection);\n        } else {\n          append(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind(gridSection, function (colGroup) {\n          return map(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append$1(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy$2 = function (grid) {\n      return map(grid, function (row) {\n        var tr = shallow(row.element);\n        each(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells.slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: endColIndex,\n        rowspan: endRowIndex\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row) {\n        return map(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map(grid, function (row, rowIndex) {\n        var details = bind(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      if (Warehouse.hasColumns(warehouse)) {\n        var groupElementNew = map(Warehouse.justColumns(warehouse), function (column) {\n          return elementnew(column.element, isNew, false);\n        });\n        grid.push(rowcells(groupElementNew, 'colgroup'));\n      }\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew, item.isLocked);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true, false);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all[rowIndex].section);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew, false);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true, false);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details);\n        return rowdatanew(row.element, details.details, details.section, row.isNew);\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = toDetails(grid, eq$1);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var extractCells = function (warehouse, target, predicate) {\n      var details = map(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        }).filter(predicate);\n      });\n      var cells = cat(details);\n      return someIf(cells.length > 0, cells);\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, sizing, resizeBehaviour) {\n        var warehouse = Warehouse.fromTable(table);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators));\n          var lockedColumns = getLockedColumnsFromGrid(result.grid);\n          var grid = toDetailList(result.grid, generators);\n          return {\n            info: info,\n            grid: grid,\n            cursor: result.cursor,\n            lockedColumns: lockedColumns\n          };\n        });\n        return output.bind(function (out) {\n          var newElements = render(table, out.grid);\n          var tableSizing = Optional.from(sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          var resizing = Optional.from(resizeBehaviour).getOrThunk(preserveTable);\n          adjustment(table, out.grid, out.info, tableSizing, resizing);\n          postAction(table);\n          refresh(wire, table);\n          remove(table, LOCKED_COL_ATTR);\n          if (out.lockedColumns.length > 0) {\n            set(table, LOCKED_COL_ATTR, out.lockedColumns.join(','));\n          }\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      return extractCells(warehouse, target, always).map(function (cells) {\n        return {\n          cells: cells,\n          generators: target.generators,\n          clipboard: target.clipboard\n        };\n      });\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      return extractCells(warehouse, target, always);\n    };\n    var onUnlockedCell = function (warehouse, target) {\n      return onCell(warehouse, target).filter(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var onUnlockedCells = function (warehouse, target) {\n      return extractCells(warehouse, target, function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var isUnlockedTableCell = function (warehouse, cell) {\n      return findInWarehouse(warehouse, cell).exists(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var allUnlocked = function (warehouse, cells) {\n      return forall(cells, function (cell) {\n        return isUnlockedTableCell(warehouse, cell);\n      });\n    };\n    var onUnlockedMergable = function (warehouse, target) {\n      return onMergable(warehouse, target).filter(function (mergeable) {\n        return allUnlocked(warehouse, mergeable.cells);\n      });\n    };\n    var onUnlockedUnmergable = function (warehouse, target) {\n      return onUnmergable(warehouse, target).filter(function (cells) {\n        return allUnlocked(warehouse, cells);\n      });\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          var row = rows[i];\n          var isLocked = getCell(row, j).isLocked;\n          mutateCell(row, j, elementnew(substitution(), false, isLocked));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var row = rows[i];\n          var currentCell = getCell(row, j);\n          var currentCellElm = currentCell.element;\n          var isToReplace = comparator(currentCellElm, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(row, j, elementnew(substitution(), true, currentCell.isLocked));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true, current.isLocked));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Optional.none();\n          for (var i = index; i < rows.length; i++) {\n            var _loop_1 = function (j) {\n              var row = rows[i];\n              var current = getCell(row, j);\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(row, j, elementnew(sub, true, current.isLocked));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_1(j);\n            }\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (amount, row, generators, isLocked) {\n      var generator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return range(amount, function (idx) {\n        return elementnew(generator(), true, isLocked(idx));\n      });\n    };\n    var rowFill = function (grid, amount, generators, lockedColumns) {\n      return grid.concat(range(amount, function () {\n        var row = grid[grid.length - 1];\n        var elements = generateElements(row.cells.length, row, generators, function (idx) {\n          return has(lockedColumns, idx.toString());\n        });\n        return setCells(row, elements);\n      }));\n    };\n    var colFill = function (grid, amount, generators, startIndex) {\n      return map(grid, function (row) {\n        var newChildren = generateElements(amount, row, generators, never);\n        return addCells(row, startIndex, newChildren);\n      });\n    };\n    var lockedColFill = function (grid, generators, lockedColumns) {\n      return map(grid, function (row) {\n        return foldl(lockedColumns, function (acc, colNum) {\n          var newChild = generateElements(1, row, generators, always)[0];\n          return addCell(acc, colNum, newChild);\n        }, row);\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var gridWidth = cellLength(gridA[0]);\n      var isLastColLocked = exists(lockedColumns, function (locked) {\n        return locked === gridWidth - 1;\n      });\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);\n      var newLockedColumns = getLockedColumnsFromGrid(modifiedCols);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, mapToObject(newLockedColumns, always));\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator, lockedColumns) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth + lockedColumns.length;\n      var lockedColumnObj = mapToObject(lockedColumns, always);\n      for (var r = startRow; r < endRow; r++) {\n        var skippedCol = 0;\n        for (var c = startCol; c < endCol; c++) {\n          if (lockedColumnObj[c]) {\n            skippedCol++;\n            continue;\n          }\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var gridBColIndex = c - startCol - skippedCol;\n          var newCell = getCell(gridB[r - startRow], gridBColIndex);\n          var newCellElm = newCell.element;\n          var replacement = generator.replace(newCellElm);\n          mutateCell(gridA[r], c, elementnew(replacement, true, newCell.isLocked));\n        }\n      }\n      return gridA;\n    };\n    var getValidStartAddress = function (currentStartAddress, grid, lockedColumns) {\n      var gridColLength = cellLength(grid[0]);\n      var possibleColAddresses = range(gridColLength - currentStartAddress.column, function (num) {\n        return num + currentStartAddress.column;\n      });\n      var validColAddress = find(possibleColAddresses, function (num) {\n        return forall(lockedColumns, function (col) {\n          return col !== num;\n        });\n      }).getOr(gridColLength - 1);\n      return __assign(__assign({}, currentStartAddress), { column: validColAddress });\n    };\n    var getLockedColumnsWithinBounds = function (startAddress, grid, lockedColumns) {\n      return filter(lockedColumns, function (colNum) {\n        return colNum >= startAddress.column && colNum <= cellLength(grid[0]) + startAddress.column;\n      });\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);\n      var lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, lockedColumns);\n      var result = measure(validStartAddress, gridA, gridB);\n      return result.map(function (diff) {\n        var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - lockedColumnsWithinBounds.length });\n        var fittedGrid = tailor(gridA, delta, generator);\n        var newLockedColumns = getLockedColumnsFromGrid(fittedGrid);\n        var newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridB, newLockedColumns);\n        return mergeTables(validStartAddress, fittedGrid, gridB, generator, comparator, newLockedColumnsWithinBounds);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map(fittedOldGrid, function (gridRow, i) {\n        return addCells(gridRow, index, fittedNewGrid[i].cells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var locked = getLockedColumnsFromGrid(gridA);\n      var diff = measureWidth(gridA, gridB);\n      var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - locked.length });\n      var fittedOldGrid = tailor(gridA, delta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      var newLocked = getLockedColumnsFromGrid(fittedOldGrid);\n      var secondDiff = measureWidth(gridB, gridA);\n      var secondDelta = __assign(__assign({}, secondDiff), { colDelta: secondDiff.colDelta + newLocked.length });\n      var fittedGridB = lockedColFill(gridB, generator, newLocked);\n      var fittedNewGrid = tailor(fittedGridB, secondDelta, generator);\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var between = mapCells(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true, ex.isLocked);\n        return ret;\n      });\n      return cols.concat(before).concat([between]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        var cell = getCell(row, example);\n        return elementnew(substitution(cell.element, comparator), true, false);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, columns) {\n      return bind(grid, function (row) {\n        var existingCells = row.cells;\n        var cells = foldr(columns, function (acc, column) {\n          return column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc;\n        }, existingCells);\n        return cells.length > 0 ? [rowcells(cells, row.section)] : [];\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map(grid, function (row) {\n        return mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element, comparator), true, cell.isLocked) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targets = bind(rows, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetRow = rows[index];\n      var targets = bind(targetRow.cells, function (item, i) {\n        var alreadyAdded = notStartRow(rows, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      var position = Cell(Optional.none());\n      var nu = function (data) {\n        switch (name(data.element)) {\n        case 'col':\n          return generators.col(data);\n        default:\n          return generators.cell(data);\n        }\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Optional.some(replacement));\n        }\n        recent = Optional.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform$1 = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Optional.none());\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Optional.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          if (name(element) === 'col') {\n            return element;\n          } else {\n            return find$1(element, comparator).fold(function () {\n              return makeNew(element);\n            }, function (p) {\n              return comparator(element, p.item) ? p.sub : makeNew(element);\n            });\n          }\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var getScopeAttribute = function (cell) {\n      return getOpt(cell, 'scope').map(function (attribute) {\n        return attribute.substr(0, 3);\n      });\n    };\n    var merging = function (generators) {\n      var position = Cell(Optional.none());\n      var unmerge = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Optional.some(cell));\n        }\n        var scope = getScopeAttribute(cell);\n        scope.each(function (attribute) {\n          return set(cell, 'scope', attribute);\n        });\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          scope.each(function (attribute) {\n            return set(raw, 'scope', attribute);\n          });\n          return raw;\n        };\n      };\n      var merge = function (cells) {\n        var getScopeProperty = function () {\n          var stringAttributes = cat(map(cells, getScopeAttribute));\n          if (stringAttributes.length === 0) {\n            return Optional.none();\n          } else {\n            var baseScope_1 = stringAttributes[0];\n            var scopes_1 = [\n              'row',\n              'col'\n            ];\n            var isMixed = exists(stringAttributes, function (attribute) {\n              return attribute !== baseScope_1 && contains(scopes_1, attribute);\n            });\n            return isMixed ? Optional.none() : Optional.from(baseScope_1);\n          }\n        };\n        remove$1(cells[0], 'width');\n        getScopeProperty().fold(function () {\n          return remove(cells[0], 'scope');\n        }, function (attribute) {\n          return set(cells[0], 'scope', attribute + 'group');\n        });\n        return constant(cells[0]);\n      };\n      return {\n        unmerge: unmerge,\n        merge: merge,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform$1,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$2 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return isBlock(universe$2, element);\n    };\n    var isList$1 = function (element) {\n      return isList(universe$2, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return isEmptyTag(universe$2, element);\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$4(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, isList$1).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock$1(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag$1(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock$1(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n\n    var prune = function (table) {\n      var cells$1 = cells(table);\n      if (cells$1.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return findIn(rows, row, column).orThunk(function () {\n        return findIn(rows, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Optional.from(grid[row]).bind(function (r) {\n        return Optional.from(r.cells[column]).bind(function (c) {\n          return Optional.from(c.element);\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return outcome(grid, findIn(rows, row, column));\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldr(rows, function (acc, row) {\n        var newG = insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var target = rows[rows.length - 1];\n      var targetIndex = target.row + target.rowspan;\n      var newGrid = foldr(rows, function (newG, row) {\n        return insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var columns = uniqueColumns(details);\n      var targetIndex = columns[0].column;\n      var newGrid = foldr(columns, function (acc, col) {\n        var newG = insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var target = details[details.length - 1];\n      var targetIndex = target.column + target.colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldr(columns, function (newG, col) {\n        return insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opEraseColumns = function (grid, extractDetail, _comparator, _genWrappers) {\n      var columns = uniqueColumns(extractDetail.details);\n      var newGrid = deleteColumnsAt(grid, map(columns, function (column) {\n        return column.column;\n      }));\n      var cursor = elementFromGrid(newGrid, columns[0].row, columns[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var cursor = elementFromGrid(newGrid, details[0].row, details[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opMergeCells = function (grid, mergable, comparator, genWrappers) {\n      var cells = mergable.cells;\n      merge$2(cells);\n      var newGrid = merge(grid, mergable.bounds, comparator, genWrappers.merge(cells));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var unmerge$1 = function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.unmerge(cell));\n      };\n      var newGrid = foldr(unmergable, unmerge$1, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        var cursor = elementFromGrid(newGrid, pasteDetails.row, pasteDetails.column);\n        return outcome(newGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opGetColumnType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten(map(house.all, function (row) {\n          return filter(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return getCellsType(selectedColumnCells, function (cell) {\n          return name(cell.element) === 'th';\n        });\n      }).getOr('');\n    };\n    var getCellsType = function (cells, headerPred) {\n      var headerCells = filter(cells, headerPred);\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var resize = adjustWidthTo;\n    var adjustAndRedistributeWidths$1 = adjustAndRedistributeWidths;\n    var firstColumnIsLocked = function (_warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column === 0 && detail.isLocked;\n      });\n    };\n    var lastColumnIsLocked = function (warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked;\n      });\n    };\n    var getColumnsWidth = function (warehouse, details) {\n      var columns = columns$1(warehouse);\n      var uniqueCols = uniqueColumns(details);\n      return foldl(uniqueCols, function (acc, detail) {\n        var column = columns[detail.column];\n        var colWidth = column.map(getOuter).getOr(0);\n        return acc + colWidth;\n      }, 0);\n    };\n    var insertColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onCells(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details);\n        }).map(function (details) {\n          return {\n            details: details,\n            pixelDelta: getColumnsWidth(warehouse, details)\n          };\n        });\n      };\n    };\n    var eraseColumnsExtractor = function (warehouse, target) {\n      return onUnlockedCells(warehouse, target).map(function (details) {\n        return {\n          details: details,\n          pixelDelta: -getColumnsWidth(warehouse, details)\n        };\n      });\n    };\n    var pasteColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onPasteByEditor(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details.cells);\n        });\n      };\n    };\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths$1, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths$1, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnHeader = run(opMakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform('row', 'th'));\n    var makeColumnsHeader = run(opMakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform('row', 'th'));\n    var unmakeColumnHeader = run(opUnmakeColumnHeader, onUnlockedCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onUnlockedCells, noop, noop, Generators.transform(null, 'td'));\n    var makeRowHeader = run(opMakeRowHeader, onCell, noop, noop, Generators.transform('col', 'th'));\n    var makeRowsHeader = run(opMakeRowsHeader, onCells, noop, noop, Generators.transform('col', 'th'));\n    var unmakeRowHeader = run(opUnmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeRowsHeader = run(opUnmakeRowsHeader, onCells, noop, noop, Generators.transform(null, 'td'));\n    var mergeCells = run(opMergeCells, onUnlockedMergable, resize, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnlockedUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, pasteColumnsExtractor(true), noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, pasteColumnsExtractor(false), noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnType = opGetColumnType;\n\n    var getSection = function (elm) {\n      return getNodeName(elm.parentNode);\n    };\n    var mapSectionNameToType = function (section) {\n      if (section === 'thead') {\n        return 'header';\n      } else if (section === 'tfoot') {\n        return 'footer';\n      } else {\n        return 'body';\n      }\n    };\n    var detectHeaderRow = function (editor, elm) {\n      var isThead = getSection(elm) === 'thead';\n      var areAllCellsThs = !exists(elm.cells, function (c) {\n        return getNodeName(c) !== 'th';\n      });\n      return isThead || areAllCellsThs ? Optional.some({\n        thead: isThead,\n        ths: areAllCellsThs\n      }) : Optional.none();\n    };\n    var getRowType = function (editor, elm) {\n      return mapSectionNameToType(detectHeaderRow(editor, elm).fold(function () {\n        return getSection(elm);\n      }, function (_rowConfig) {\n        return 'thead';\n      }));\n    };\n    var switchRowSection = function (dom, rowElm, newSectionName) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldSectionElm = rowElm.parentNode;\n      var oldSectionName = getNodeName(oldSectionElm);\n      if (newSectionName !== oldSectionName) {\n        var sectionElm_1 = dom.select(newSectionName, tableElm)[0];\n        if (!sectionElm_1) {\n          sectionElm_1 = dom.create(newSectionName);\n          var firstTableChild_1 = tableElm.firstChild;\n          if (newSectionName === 'thead') {\n            last(children$2(SugarElement.fromDom(tableElm), 'caption,colgroup')).fold(function () {\n              return tableElm.insertBefore(sectionElm_1, firstTableChild_1);\n            }, function (c) {\n              return dom.insertAfter(sectionElm_1, c.dom);\n            });\n          } else {\n            tableElm.appendChild(sectionElm_1);\n          }\n        }\n        if (newSectionName === 'tbody' && oldSectionName === 'thead' && sectionElm_1.firstChild) {\n          sectionElm_1.insertBefore(rowElm, sectionElm_1.firstChild);\n        } else {\n          sectionElm_1.appendChild(rowElm);\n        }\n        if (!oldSectionElm.hasChildNodes()) {\n          dom.remove(oldSectionElm);\n        }\n      }\n    };\n    var renameCell = function (editor, cell, newCellType) {\n      if (isNonNullable(newCellType) && getNodeName(cell) !== newCellType) {\n        var newCellElm = editor.dom.rename(cell, newCellType);\n        fireNewCell(editor, newCellElm);\n        return newCellElm;\n      } else {\n        return cell;\n      }\n    };\n    var switchCellType = function (editor, cell, newCellType, scope) {\n      var dom = editor.dom;\n      var newCell = renameCell(editor, cell, newCellType);\n      if (!isUndefined(scope)) {\n        dom.setAttrib(newCell, 'scope', scope);\n      }\n      return newCell;\n    };\n    var switchCellsType = function (editor, cells, newCellType, scope) {\n      return each(cells, function (c) {\n        return switchCellType(editor, c, newCellType, scope);\n      });\n    };\n    var switchSectionType = function (editor, rowElm, newType) {\n      var determineHeaderRowType = function () {\n        var allTableRows = table(SugarElement.fromDom(rowElm.cells[0])).map(function (table) {\n          return rows(table);\n        }).getOr([]);\n        return findMap(allTableRows, function (row) {\n          return detectHeaderRow(editor, row.dom);\n        }).map(function (detectedType) {\n          if (detectedType.thead && detectedType.ths) {\n            return 'sectionCells';\n          } else {\n            return detectedType.thead ? 'section' : 'cells';\n          }\n        }).getOr('section');\n      };\n      var dom = editor.dom;\n      if (newType === 'header') {\n        var headerRowTypeSetting = getTableHeaderType(editor);\n        var headerRowType = headerRowTypeSetting === 'auto' ? determineHeaderRowType() : headerRowTypeSetting;\n        switchCellsType(editor, rowElm.cells, headerRowType === 'section' ? 'td' : 'th', 'col');\n        switchRowSection(dom, rowElm, headerRowType === 'cells' ? 'tbody' : 'thead');\n      } else {\n        switchCellsType(editor, rowElm.cells, 'td', null);\n        switchRowSection(dom, rowElm, newType === 'footer' ? 'tfoot' : 'tbody');\n      }\n    };\n\n    var getSelectionStartCellFallback = function (start) {\n      return table(start).bind(function (table) {\n        return retrieve$1(table, ephemera.firstSelectedSelector);\n      }).fold(function () {\n        return start;\n      }, function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionStartFromSelector = function (selector) {\n      return function (start) {\n        var startCellName = name(start);\n        var startCell = startCellName === 'col' || startCellName === 'colgroup' ? getSelectionStartCellFallback(start) : start;\n        return closest$1(startCell, selector);\n      };\n    };\n    var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n    var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n    var getCellsFromSelection = function (start, selections) {\n      return getSelectionStartCell(start).map(function (_cell) {\n        return selection(selections);\n      }).getOr([]);\n    };\n    var getRowsFromSelection = function (start, selector) {\n      var cellOpt = getSelectionStartCell(start);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter(rows, function (row) {\n          return exists(fromDom$1(row.dom.cells), function (rowCell) {\n            return get$2(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var TableActions = function (editor, lazyWire, selections) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var colMutationOp = isResizeTableColumnResizing(editor) ? noop : halve;\n      var execute = function (operation, guard, mutate, lazyWire, effect) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var sizing = get$9(editor, table);\n          var resizeBehaviour = isResizeTableColumnResizing(editor) ? resizeTable() : preserveTable();\n          return guard(table) ? operation(wire, table, target, generators, sizing, resizeBehaviour).bind(function (result) {\n            each(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            return result.cursor.map(function (cell) {\n              var des = freefallRtl$2(cell);\n              var rng = editor.dom.createRng();\n              rng.setStart(des.element.dom, des.offset);\n              rng.setEnd(des.element.dom, des.offset);\n              return {\n                rng: rng,\n                effect: effect\n              };\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire, structureModified);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire, structureModified);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire, structureModified);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire, structureModified);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, colMutationOp, lazyWire, structureModified);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, colMutationOp, lazyWire, structureModified);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire, structureModified);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire, structureModified);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire, structureModified);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire, structureModified);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire, structureModified);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire, structureModified);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire, structureModified);\n      var extractType = function (args, validTypes) {\n        return get$1(args, 'type').filter(function (type) {\n          return contains(validTypes, type);\n        });\n      };\n      var setTableCellType = function (editor, args) {\n        return extractType(args, [\n          'td',\n          'th'\n        ]).each(function (type) {\n          var cells = map(getCellsFromSelection(getSelectionStart(editor), selections), function (c) {\n            return c.dom;\n          });\n          switchCellsType(editor, cells, type, null);\n        });\n      };\n      var setTableRowType = function (editor, args) {\n        return extractType(args, [\n          'header',\n          'body',\n          'footer'\n        ]).each(function (type) {\n          map(getRowsFromSelection(getSelectionStart(editor), ephemera.selected), function (row) {\n            return switchSectionType(editor, row.dom, type);\n          });\n        });\n      };\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire, structureModified);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire, structureModified);\n      var getTableRowType = function (editor) {\n        var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n        if (rows.length > 0) {\n          var rowTypes = map(rows, function (r) {\n            return getRowType(editor, r.dom);\n          });\n          var hasHeader = contains(rowTypes, 'header');\n          var hasFooter = contains(rowTypes, 'footer');\n          if (!hasHeader && !hasFooter) {\n            return 'body';\n          } else {\n            var hasBody = contains(rowTypes, 'body');\n            if (hasHeader && !hasBody && !hasFooter) {\n              return 'header';\n            } else if (!hasHeader && !hasBody && hasFooter) {\n              return 'footer';\n            } else {\n              return '';\n            }\n          }\n        }\n      };\n      var getTableCellType = function (editor) {\n        return getCellsType(getCellsFromSelection(getSelectionStart(editor), selections), function (cell) {\n          return name(cell) === 'th';\n        }).getOr('');\n      };\n      var getTableColType = getColumnType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        setTableCellType: setTableCellType,\n        setTableRowType: setTableRowType,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set(td, 'scope', 'col');\n        }\n        append(td, SugarElement.fromTag('br'));\n        append(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range(columns, function () {\n        return append(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append$1(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append$1(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$b = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$b(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage$1 = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render$1(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set(table, 'data-mce-id', '__mce');\n        var html = getOuter$2(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(editor, table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage$1(defaultStyles.width)) {\n          enforcePercentage(editor, table);\n        }\n        removeDataStyle(table);\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert$1(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom$1(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove(element, property);\n      } else {\n        set(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append$1(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map(house.all, function (row) {\n        var cellsToCopy = filter(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append$1(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onUnlockedCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArrays(fakeColGroups, fakeRows);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.bind(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var filteredGrid = bind(slicedGrid, function (row) {\n          var newCells = filter(row.cells, function (cell) {\n            return !cell.isLocked;\n          });\n          return newCells.length > 0 ? [__assign(__assign({}, row), { cells: newCells })] : [];\n        });\n        var slicedDetails = toDetailList(filteredGrid, generators);\n        return someIf(slicedDetails.length > 0, slicedDetails);\n      }).map(function (slicedDetails) {\n        return copy$2(slicedDetails);\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (inputList, startItems) {\n      var appendItems = function (values, acc) {\n        return acc.concat(map(values, function (item) {\n          var text = item.text || item.title;\n          if (isListGroup(item)) {\n            return {\n              text: text,\n              items: buildListItems(item.menu)\n            };\n          } else {\n            return {\n              text: text,\n              value: item.value\n            };\n          }\n        }));\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw(element, 'border-width').getOr(''),\n        borderstyle: getRaw(element, 'border-style').getOr(''),\n        bordercolor: getRaw(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each(comparisonData, function (items) {\n        each(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAdvancedTab = function (dialogName) {\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: [\n            {\n              text: 'Select...',\n              value: ''\n            },\n            {\n              text: 'Solid',\n              value: 'solid'\n            },\n            {\n              text: 'Dotted',\n              value: 'dotted'\n            },\n            {\n              text: 'Dashed',\n              value: 'dashed'\n            },\n            {\n              text: 'Double',\n              value: 'double'\n            },\n            {\n              text: 'Groove',\n              value: 'groove'\n            },\n            {\n              text: 'Ridge',\n              value: 'ridge'\n            },\n            {\n              text: 'Inset',\n              value: 'inset'\n            },\n            {\n              text: 'Outset',\n              value: 'outset'\n            },\n            {\n              text: 'None',\n              value: 'none'\n            },\n            {\n              text: 'Hidden',\n              value: 'hidden'\n            }\n          ]\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find(formats, function (name) {\n        return editor.formatter.matchNode(elm, formatName + name);\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$1(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$1(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$1(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$1(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$1(style, 'border-spacing').or(get$1(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$1(style, 'border-padding').or(get$1(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n        cellpadding: dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(editor.dom, elm, 'padding'),\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(editor, elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children$3 = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'H Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'V Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Top',\n            value: 'top'\n          },\n          {\n            text: 'Middle',\n            value: 'middle'\n          },\n          {\n            text: 'Bottom',\n            value: 'bottom'\n          }\n        ]\n      }\n    ];\n    var getItems = function (editor) {\n      return children$3.concat(getClassList(editor).toArray());\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var getSelectedCells = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var warehouse = Warehouse.fromTable(table);\n        var allCells = Warehouse.justCells(warehouse);\n        var filtered = filter(allCells, function (cellA) {\n          return exists(cells, function (cellB) {\n            return eq$1(cellA.element, cellB);\n          });\n        });\n        return map(filtered, function (cell) {\n          return {\n            element: cell.element.dom,\n            column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n              return col.element.dom;\n            })\n          };\n        });\n      });\n    };\n    var updateSimpleProps = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyCellData = function (editor, cells, oldData, data) {\n      var isSingleCell = cells.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0 && cells.length >= 1) {\n        var tableOpt = table(cells[0]);\n        getSelectedCells(cells).each(function (selectedCells) {\n          each(selectedCells, function (item) {\n            var cellElm = switchCellType(editor, item.element, data.celltype);\n            var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n            var colModifier = item.column.map(function (col) {\n              return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n            }).getOr(modifier);\n            updateSimpleProps(modifier, colModifier, data);\n            if (hasAdvancedCellTab(editor)) {\n              updateAdvancedProps(modifier, data);\n            }\n            if (isSingleCell) {\n              unApplyAlign(editor, cellElm);\n              unApplyVAlign(editor, cellElm);\n            }\n            if (data.halign) {\n              applyAlign(editor, cellElm, data.halign);\n            }\n            if (data.valign) {\n              applyVAlign(editor, cellElm, data.valign);\n            }\n          });\n        });\n        var styleModified_1 = size(filter$1(modifiedData, function (_value, key) {\n          return key !== 'scope' && key !== 'celltype';\n        })) > 0;\n        tableOpt.each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: has(modifiedData, 'celltype'),\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, oldData, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = getSelectedCells(cells).map(function (selectedCells) {\n        return map(selectedCells, function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open = function (editor, selections) {\n      var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems(editor)\n          },\n          getAdvancedTab('cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells, data)\n      });\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList$1(editor).toArray());\n    };\n\n    var updateSimpleProps$1 = function (modifier, data) {\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var isSingleRow = rows.length === 1;\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0) {\n        each(rows, function (rowElm) {\n          if (data.type !== getNodeName(rowElm.parentNode)) {\n            switchSectionType(editor, rowElm, data.type);\n          }\n          var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n          updateSimpleProps$1(modifier, data);\n          if (hasAdvancedRowTab(editor)) {\n            updateAdvancedProps$1(modifier, data);\n          }\n          if (data.align !== oldData.align) {\n            unApplyAlign(editor, rowElm);\n            applyAlign(editor, rowElm, data.align);\n          }\n        });\n        var typeModified_1 = has(modifiedData, 'type');\n        var styleModified_1 = typeModified_1 ? size(modifiedData) > 1 : true;\n        table(SugarElement.fromDom(rows[0])).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: typeModified_1,\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab('row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getItems$2 = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, oldData, api) {\n      var dom = editor.dom;\n      var captionElm;\n      var data = api.getData();\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert$1(editor, cols, rows, 0, 0);\n        }\n        if (size(modifiedData) > 0) {\n          applyDataToElement(editor, tableElm, data);\n          captionElm = dom.select('caption', tableElm)[0];\n          if (captionElm && !data.caption) {\n            dom.remove(captionElm);\n          }\n          if (!captionElm && data.caption) {\n            captionElm = dom.create('caption');\n            captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : nbsp;\n            tableElm.insertBefore(captionElm, tableElm.firstChild);\n          }\n          if (data.align === '') {\n            unApplyAlign(editor, tableElm);\n          } else {\n            applyAlign(editor, tableElm, data.align);\n          }\n        }\n        editor.focus();\n        editor.addVisual();\n        if (size(modifiedData) > 0) {\n          var captionModified = has(modifiedData, 'caption');\n          var styleModified = captionModified ? size(modifiedData) > 1 : true;\n          fireTableModified(editor, tableElm, {\n            structure: captionModified,\n            style: styleModified\n          });\n        }\n      });\n    };\n    var open$2 = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems$2(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab('table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm, data),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption$1 = function (editor) {\n      return getSelectionStartCellOrCaption(getSelectionStart(editor));\n    };\n    var getSelectionStartCell$1 = function (editor) {\n      return getSelectionStartCell(getSelectionStart(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing$1(table)) {\n                enforcePercentage(editor, table);\n              } else if (sizing === 'fixed' && !isPixelSizing$1(table)) {\n                enforcePixels(editor, table);\n              } else if (sizing === 'responsive' && !isNoneSizing$1(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom, structureModified);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var postExecute = function (table) {\n        return function (data) {\n          editor.selection.setRng(data.rng);\n          editor.focus();\n          cellSelection.clear(table);\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, data.effect);\n        };\n      };\n      var actOnSelection = function (execute) {\n        return getSelectionStartCell$1(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = forMenu(selections, table, cell);\n            execute(table, targets).each(postExecute(table));\n          });\n        });\n      };\n      var copyRowSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n            return copyRows(table, targets, generators);\n          });\n        });\n      };\n      var copyColSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return copyCols(table, targets);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell$1(editor).each(function (cell) {\n            return getTableFromCell(cell).each(function (table) {\n              var generators = paste(SugarElement.fromDom(editor.getDoc()));\n              var targets = pasteRows(selections, cell, clonedRows, generators);\n              execute(table, targets).each(postExecute(table));\n            });\n          });\n        });\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableSizingMode: function (ui, sizing) {\n          return setSizingMode(sizing);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      var fireTableModifiedForSelection = function (editor, tableOpt) {\n        tableOpt.each(function (table) {\n          fireTableModified(editor, table.dom, structureModified);\n        });\n      };\n      each$1({\n        mceTableCellType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableCellType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        },\n        mceTableRowType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableRowType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      editor.addCommand('mceTableColType', function (_ui, args) {\n        return get$1(args, 'type').each(function (type) {\n          return actOnSelection(type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader);\n        });\n      });\n      each$1({\n        mceTableProps: curry(open$2, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open$2(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, styleModified);\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      each$1({\n        mceTableRowType: function () {\n          return actions.getTableRowType(editor);\n        },\n        mceTableCellType: function () {\n          return actions.getTableCellType(editor);\n        },\n        mceTableColType: function () {\n          return getSelectionStartCell(getSelectionStart(editor)).bind(function (cell) {\n            return getTableFromCell(cell).map(function (table) {\n              var targets = forMenu(selections, table, cell);\n              return actions.getTableColType(table, targets);\n            });\n          }).getOr('');\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = Cell(Optional.none());\n      var cols = Cell(Optional.none());\n      var clearClipboard = function (clipboard) {\n        clipboard.set(Optional.none());\n      };\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          rows.set(r);\n          clearClipboard(cols);\n        },\n        clearRows: function () {\n          return clearClipboard(rows);\n        },\n        getColumns: cols.get,\n        setColumns: function (c) {\n          cols.set(c);\n          clearClipboard(rows);\n        },\n        clearColumns: function () {\n          return clearClipboard(cols);\n        }\n      };\n    };\n\n    var cellFormats = {\n      tablecellbackgroundcolor: {\n        selector: 'td,th',\n        styles: { backgroundColor: '%value' },\n        remove_similar: true\n      },\n      tablecellbordercolor: {\n        selector: 'td,th',\n        styles: { borderColor: '%value' },\n        remove_similar: true\n      },\n      tablecellborderstyle: {\n        selector: 'td,th',\n        styles: { borderStyle: '%value' },\n        remove_similar: true\n      },\n      tablecellborderwidth: {\n        selector: 'td,th',\n        styles: { borderWidth: '%value' },\n        remove_similar: true\n      }\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$2 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$2 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$2.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$2), { none: none$2 });\n\n    var detect$5 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index + 1 < info.all.length ? CellLocation.middle(current, info.all[info.index + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index - 1 >= 0 ? CellLocation.middle(current, info.all[info.index - 1]) : CellLocation.first(current);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$3 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$3.before;\n    var on = adt$3.on;\n    var after$2 = adt$3.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$4 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$4.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$4.domRange;\n    var relative = adt$4.relative;\n    var exact = adt$4.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$5 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$5.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$5.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$5.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr$1 = adt$5.ltr;\n    var rtl$1 = adt$5.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$4(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint$1 = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$3(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$c = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, next(cell), actions);\n    };\n    var backward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, prev(cell), actions);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return table(current, isRoot).bind(function (table) {\n          var targets = noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n\n    var create$3 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$3 };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create$4 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$6(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect$6 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$3 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$3, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$3, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$3, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$3, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$6 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne$1(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$6.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$6.none('in same cell');\n          }\n        });\n      }).getOr(adt$6.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$6), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$4(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop$1 = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, isBlock$1).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt$7.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt$7.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var upMovement = {\n      point: getTop$1,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan$1 = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan$1(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle$2(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect$6(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    var MouseSelection = function (bridge, container, isRoot, annotations) {\n      var cursor = value$1();\n      var clearstate = cursor.clear;\n      var applySelection = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq$1(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        applySelection(event);\n      };\n      var mouseup = function (event) {\n        applySelection(event);\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    };\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr$2 = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl$2 = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get$d = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel);\n      };\n      var getSelection = function () {\n        return get$c(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$c(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$d(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve(container, annotations.selectedSelector).fold(function () {\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$3(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$3(start, ephemera.firstSelected);\n        add$3(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected);\n        remove(element, ephemera.firstSelected);\n        remove(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected, '1');\n        set(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells, generators) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid, generators);\n      return bind(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells, generators) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid, generators);\n      return bind(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne$1(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr$2, rtl$2)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent$1(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent$1(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent$1(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var selectionDetails = Optional.none();\n      var isCaption = isTag('caption');\n      var isDisabledForSelection = function (key) {\n        return selectionDetails.forall(function (details) {\n          return !details[key];\n        });\n      };\n      var findTargets = function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor)).bind(function (cellOrCaption) {\n          var table$1 = table(cellOrCaption);\n          return table$1.map(function (table) {\n            if (isCaption(cellOrCaption)) {\n              return noMenu(cellOrCaption);\n            } else {\n              return forMenu(selections, table, cellOrCaption);\n            }\n          });\n        });\n      };\n      var getExtractedDetails = function (targets) {\n        var tableOpt = table(targets.element);\n        return tableOpt.map(function (table) {\n          var warehouse = Warehouse.fromTable(table);\n          var selectedCells = onCells(warehouse, targets).getOr([]);\n          var locked = foldl(selectedCells, function (acc, cell) {\n            if (cell.isLocked) {\n              acc.onAny = true;\n              if (cell.column === 0) {\n                acc.onFirst = true;\n              } else if (cell.column + cell.colspan >= warehouse.grid.columns) {\n                acc.onLast = true;\n              }\n            }\n            return acc;\n          }, {\n            onAny: false,\n            onFirst: false,\n            onLast: false\n          });\n          return {\n            mergeable: onUnlockedMergable(warehouse, targets).isSome(),\n            unmergeable: onUnlockedUnmergable(warehouse, targets).isSome(),\n            locked: locked\n          };\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        selectionDetails = targets.get().bind(getExtractedDetails);\n        each(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var onSetup = function (api, isDisabled) {\n        var handler = function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        };\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var isDisabledFromLocked = function (lockedDisable) {\n        return selectionDetails.exists(function (details) {\n          return details.locked[lockedDisable];\n        });\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return isCaption(targets.element);\n        });\n      };\n      var onSetupColumn = function (lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupPasteableColumn = function (getClipboardData, lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('mergeable');\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('unmergeable');\n        });\n      };\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupColumn: onSetupColumn,\n        onSetupPasteable: onSetupPasteable,\n        onSetupPasteableColumn: onSetupPasteableColumn,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        targets: function () {\n          return targets.get();\n        }\n      };\n    };\n\n    var addButtons = function (editor, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: function () {\n          return 'tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: function () {\n          return 'tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: function () {\n          return 'tablecellprops tablemergecells tablesplitcells';\n        }\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(function () {\n            return '';\n          }, function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n    };\n\n    var Plugin = function (editor) {\n      var selections = Selections(function () {\n        return getBody$1(editor);\n      }, function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, resizeHandler.lazyWire, selections);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions, cellSelection);\n      addMenuItems(editor, selectionTargets, clipboard);\n      addButtons(editor, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, actions);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    };\n    function Plugin$1 () {\n      global.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n"]}